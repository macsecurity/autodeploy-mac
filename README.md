# "Wryn"tDynamics Scripts

A friendly CLI / API for running tests and operations which require secure credentials.

## Dependencies
- [`py`](./py) : `>=python3.9`
- [`curl`](./curl) : `curl`
- [`aws`](./aws) : AWS CLI v2

## Installation
As long as the dependencies *(listed above)* are met, scripts can be run out-of-the-box.

### Scripts Virtual Environment
There are two ways to use a virtual environment with this script runner.
1. Create a parent directory (e.g. `rd-scripts`), and clone this repository into `rd-scripts/code`. Create a virtual environment at `rd-scripts/env`
2. Set the `RD_SCRIPTS_VIRTUALENV` environment variable to point to the desired virtual environment's base directory.

## Usage
### [env-sync](./env-sync)
**All secure credentials must be provided by the user. Users are held individually responsible for their own access and usage of secure credentials.**
Credentials, by default, are kept in `.prod`, `.dev`, and `.local` respectively.
These files are *never* checked in, but can be generated by the `env-sync` script, which will both create these environments locally *and* add missing environment variables to existing environments.

The [`.sync`](./.sync) file is used for comparison, and will **only** contain a stub environment.
Scripts ought not inherit from `.sync`, and secure credentials ought not be placed in `.sync`.

### [run](./run)
The `run` script provides both an API and CLI for running scripts.
When given 0-1 arguments, the application becomes interactive and prompts the user for relevant information.

Argument | Description
-------- | -----------
`$1` or `RD_SCRIPTS_ENV` | Name of the local environment. Although environments are hidden files, the name of the environment *excludes the preceding `.` character*.
`$@` | Script name by regular expression(s); provides hints if search is ambiguous.
